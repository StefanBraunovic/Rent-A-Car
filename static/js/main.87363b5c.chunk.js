(this["webpackJsonprent-a-car"]=this["webpackJsonprent-a-car"]||[]).push([[0],{210:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return l}));var a=n(183),r=n.n(a),i=n(40),c=function(e){return r()({method:"POST",baseURL:"http://akademija-api.proserver.me/api/",url:"/auth/login",data:e})},o=function(e){return i.a.post("/auth/me",{},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt-token"))}})},l=function(e){return i.a.post("/auth/change-password",e,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt-token"))}})}},236:function(e,t,n){"use strict";t.a=n.p+"static/media/logo.02ad0084.png"},324:function(e,t,n){},40:function(e,t,n){"use strict";var a=n(183),r=n.n(a).a.create({baseURL:"http://akademija-api.proserver.me/api/"});t.a=r},51:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var a={CLIENT:"Client",EMPLOYEE:"Employee",ANY:"Any"},r={ALL:0,PREVIOUS:1,PRESENT:2,FUTURE:3},i=[{label:"Small",value:1},{label:"Medium",value:2},{label:"Premium",value:3}]},571:function(e,t,n){},572:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(36),c=n.n(i),o=(n(324),n(49)),l=n(19),s=n(317),d=n(589),u=n(70),j=n(3),b=function(){var e=Object(o.f)();return Object(j.jsx)(d.a,{status:"warning",title:"This page is forbidden! Please log in",extra:Object(j.jsx)(u.a,{onClick:function(){return e.push("/")},children:"Log in"})})},p=n(23),h=(n(235),n(77)),O=n(131),m=n(152),f=n(88),x=n(590),v=n(199),y=n(588),g=n(596),_=n(35),k=n.n(_),S=n(299),w=n.n(S),C=n(236),P=n(28),q=n.n(P),I=n(48),E=n(584),T=n(313),A=n(582),F=n(586),N=n(166),L=n(184),V=n(576),D=n(593),Y=n(40),z=function(e){var t=e.queryKey,n=e.pageParam,a="vehicles?page="+(void 0===n?1:n);return t[1]&&(a+="&search=".concat(t[1])),Y.a.get(a,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt-token"))}})},M=function(){return Y.a.get("car-types",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt-token"))}})},R=function(e){var t=new FormData;return Object.keys(e).forEach((function(n){if("photo"===n){var a=e[n];Object.keys(a).forEach((function(e){t.append("photo[]",a[e])}))}else t.append(n,e[n])})),Y.a.post("vehicle",t,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt-token")),"Content-Type":"multipart/form-data"}})};function B(e){return H.apply(this,arguments)}function H(){return(H=Object(I.a)(q.a.mark((function e(t){var n,a,r,i,c,o;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(null===t||void 0===t?void 0:t.pageParam)||1,c=null===t||void 0===t?void 0:t.queryKey[1],e.next=4,Y.a.get("/cars-available",{params:Object(l.a)(Object(l.a)({},c),{},{page:i}),headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt-token"))}});case 4:return o=e.sent,e.abrupt("return",{items:null===o||void 0===o||null===(n=o.data)||void 0===n?void 0:n.data,page:null===o||void 0===o||null===(a=o.data)||void 0===a?void 0:a.current_page,last_page:null===o||void 0===o||null===(r=o.data)||void 0===r?void 0:r.last_page});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Q=n(34),U=n(288);var K=function(){var e=Object(Q.g)(),t=e.register,n=e.formState.errors;return Object(j.jsxs)("form",{children:[Object(j.jsx)("input",Object(l.a)(Object(l.a)({style:{padding:"8px"}},t("photo[]",{required:!0})),{},{type:"file",accept:"image/",multiple:!0})),Object(j.jsx)(U.a,{errors:n,name:"photo[]",render:function(e){return Object(j.jsxs)("p",{style:{color:"red",marginLeft:"10px"},children:["Minimum one image ",e.message]})}})]})},J=n(91),G=n.n(J),W={labelCol:{span:8},wrapperCol:{span:16}},Z=E.a.Step,$=function(e){var t,n,i,c,s,d,b,h,O,m,f,x,v,y=e.title,g=e.vehicleId,_=Object(o.f)(),k=r.a.useState(0),S=Object(p.a)(k,2),w=S[0],C=S[1],P=Object(L.b)(),z=Object(V.a)("car-types",M).data,B=Object(Q.f)("Edit"===y?{defaultValues:{photos:g.photos,plate_no:g.plate_no,production_year:g.production_year,no_of_seats:g.no_of_seats,car_type_id:g.car_type_id,name:g.name,price_per_day:g.price_per_day,remarks:g.remarks}}:{}),H=(B.setValue,B.reset),U=B.handleSubmit,J=B.control,$=B.formState.errors,X=Object(a.useState)(),ee=Object(p.a)(X,2),te=(ee[0],ee[1]),ne=Object(D.a)(["updateMutation",null===g||void 0===g?void 0:g.id],(function(e){return function(e,t){var n=new FormData;return Object.keys(e).forEach((function(t){if("photo"===t){var a=e[t];Object.keys(a).forEach((function(e){n.append("photo[]",a[e])}))}else n.append(t,e[t])})),Y.a.post("vehicle-update/".concat(t),n,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt-token")),"Content-Type":"multipart/form-data"}})}(e,null===g||void 0===g?void 0:g.id)}),{onSuccess:function(){T.b.success("successMessages.updated"),P.refetchQueries("vehicles"),_.push("vehicles")},onError:function(e){te(e.response.data.message)}}),ae=function(){var e=Object(I.a)(q.a.mark((function e(t){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Add new vehicle"!==y){e.next=7;break}return H(),e.next=4,R(t).then((function(e){G.a.fire("Good job!","You created the vehicle  !","success"),P.refetchQueries("vehicles"),_.push("/vehicles")})).catch((function(e){te(e.response.data.message)}));case 4:P.refetchQueries("vehicles"),e.next=12;break;case 7:if("Edit"!==y){e.next=12;break}return e.next=10,ne.mutateAsync(t);case 10:P.refetchQueries("vehicles"),H();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e;(e=g,Y.a.delete("vehicle-delete/".concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt-token"))}})).then((function(e){})),_.push("/vehicles")},ie=[{title:"First",content:Object(j.jsxs)(A.a,{children:[Object(j.jsxs)(A.a.Item,{span:6,label:"Plates",htmlFor:"plate_no",required:!0,children:[Object(j.jsx)(Q.a,{name:"plate_no",control:J,rules:{required:!0,minLength:7},render:function(e){var t=e.field;return Object(j.jsx)(F.a,Object(l.a)({},t))}}),Object(j.jsx)("p",{style:{color:"red"},children:"required"===(null===(t=$.plate_no)||void 0===t?void 0:t.type)&&"This field is required"}),Object(j.jsx)("p",{style:{color:"red"},children:"minLength"===(null===(n=$.plate_no)||void 0===n?void 0:n.type)&&"The minimum character is seven"})]}),Object(j.jsxs)(A.a.Item,{span:6,label:"\tProduction Year",htmlFor:"production_year",required:!0,children:[Object(j.jsx)(Q.a,{name:"production_year",control:J,rules:{required:!0,min:1950,max:2021},render:function(e){var t=e.field;return Object(j.jsx)(F.a,Object(l.a)({},t))}}),Object(j.jsx)("p",{style:{color:"red"},children:"required"===(null===(i=$.production_year)||void 0===i?void 0:i.type)&&"This field is required"}),Object(j.jsx)("p",{style:{color:"red"},children:"min"===(null===(c=$.production_year)||void 0===c?void 0:c.type)&&"the minimum year is 1950"}),Object(j.jsx)("p",{style:{color:"red"},children:"max"===(null===(s=$.production_year)||void 0===s?void 0:s.type)&&"the maximum year is 2021"})]}),Object(j.jsxs)(A.a.Item,{label:"Vehicle Type",required:!0,children:[Object(j.jsx)(Q.a,{name:"car_type_id",control:J,rules:{required:!0},render:function(e){var t,n=e.field;return Object(j.jsx)(N.a,Object(l.a)({options:(null===z||void 0===z||null===(t=z.data)||void 0===t?void 0:t.data.map((function(e){return{label:e.name,value:e.id}})))||[]},n))}}),Object(j.jsx)("p",{style:{color:"red"},children:"required"===(null===(d=$.car_id)||void 0===d?void 0:d.type)&&"Please select a country"})]}),Object(j.jsxs)(A.a.Item,{span:6,label:"Number of seats",htmlFor:"no_of_seats",required:!0,children:[Object(j.jsx)(Q.a,{name:"no_of_seats",control:J,rules:{required:!0,max:5,min:2},render:function(e){var t=e.field;return Object(j.jsx)(F.a,Object(l.a)({type:"number"},t))}}),Object(j.jsx)("p",{style:{color:"red"},children:"required"===(null===(b=$.no_of_seats)||void 0===b?void 0:b.type)&&"This field is required"}),Object(j.jsx)("p",{style:{color:"red"},children:"max"===(null===(h=$.no_of_seats)||void 0===h?void 0:h.type)&&"The maximum seats is five"}),Object(j.jsx)("p",{style:{color:"red"},children:"min"===(null===(O=$.no_of_seats)||void 0===O?void 0:O.type)&&"The minimal seats is five"})]}),Object(j.jsxs)(A.a.Item,{span:6,label:"Price/Day",htmlFor:"price_per_day",required:!0,children:[Object(j.jsx)(Q.a,{name:"price_per_day",control:J,rules:{required:!0,max:500,min:40},render:function(e){var t=e.field;return Object(j.jsx)(F.a,Object(l.a)({},t))}}),Object(j.jsx)("p",{style:{color:"red"},children:"required"===(null===(m=$.price_per_day)||void 0===m?void 0:m.type)&&"This field is required"}),Object(j.jsx)("p",{style:{color:"red"},children:"max"===(null===(f=$.price_per_day)||void 0===f?void 0:f.type)&&"Maximum price per day is 500\u20ac"}),Object(j.jsx)("p",{style:{color:"red"},children:"min"===(null===(x=$.price_per_day)||void 0===x?void 0:x.type)&&"Minimum price per day is 40\u20ac"})]}),Object(j.jsxs)(A.a.Item,{span:6,label:"Additional Remarks",htmlFor:"remarks",required:!0,children:[Object(j.jsx)(Q.a,{name:"remarks",control:J,rules:{required:!0},render:function(e){var t=e.field;return Object(j.jsx)(F.a,Object(l.a)({},t))}}),Object(j.jsx)("p",{style:{color:"red"},children:"required"===(null===(v=$.remarks)||void 0===v?void 0:v.type)&&"This field is required"})]})]})},{title:"Second",content:Object(j.jsx)(K,{})}];return"Delete"===y?Object(j.jsx)("div",{children:Object(j.jsxs)(A.a,Object(l.a)(Object(l.a)({},W),{},{name:"nest-messages",children:[Object(j.jsx)("h1",{children:y}),Object(j.jsx)(u.a,{style:{display:"block"},onClick:function(){return re()},type:"primary",htmlType:"submit",children:"Submit"})]}))}):Object(j.jsx)(Q.b,Object(l.a)(Object(l.a)({},B),{},{children:Object(j.jsxs)("form",{action:"",onSubmit:U(ae),children:[Object(j.jsx)(E.a,{style:{padding:"20px"},current:w,children:ie.map((function(e){return Object(j.jsx)(Z,{title:e.title},e.title)}))}),Object(j.jsx)("div",{className:"steps-content",children:ie[w].content}),Object(j.jsxs)("div",{className:"steps-action",children:[w<ie.length-1&&Object(j.jsx)(u.a,{type:"secondary",onClick:function(){C(w+1)},children:"Next"}),w>0&&Object(j.jsx)(u.a,{style:{margin:"0 8px"},onClick:function(){C(w-1)},children:"Previous"}),Object(j.jsx)("input",{style:{float:"right"},type:"submit"})]})]})}))},X=Object(a.memo)($),ee=n(136),te=n(52),ne=n(69),ae=function(e){var t=e.queryKey,n=e.pageParam,a="clients?page="+(void 0===n?1:n);return t[1]&&(a+="&search=".concat(t[1])),Y.a.get(a,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt-token"))}})};function re(e,t,n){return ie.apply(this,arguments)}function ie(){return(ie=Object(I.a)(q.a.mark((function e(t,n,a){var r,i,c,o,l;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.page,e.next=3,Y.a.get("/clients",{params:{page:o},headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt-token"))}});case 3:return l=e.sent,e.abrupt("return",{options:Object(ne.d)(null===l||void 0===l||null===(r=l.data)||void 0===r?void 0:r.data),hasMore:(null===l||void 0===l||null===(i=l.data)||void 0===i?void 0:i.current_page)<(null===l||void 0===l||null===(c=l.data)||void 0===c?void 0:c.last_page),additional:{page:o+1}});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ce=function(){return Y.a.get("countries",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt-token"))}})},oe=function(){var e=Object(I.a)(q.a.mark((function e(t){var n;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={name:t.name,email:t.email,phone_no:t.phone_no,identification_document_no:String(t.identification_document_no),country_id:String(t.country_id)},Y.a.post("user-update/".concat(t.user.id),n,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt-token")),"Content-Type":"application/json"}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(e){var t={name:e.name,email:e.email,phone_no:String(e.phone_no),identification_document_no:String(e.identification_document_no),country_id:String(e.country_id)};return Y.a.post("/user-store",t,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt-token")),"Content-Type":"application/json"}})},se=n(294),de=n.n(se),ue={name:"",identification_document_no:"",phone_no:0,country_id:"",remarks:""},je=te.c().shape({name:te.e().required(),email:te.e().email().required(),country_id:te.b().required(),identification_document_no:te.e().required(),phone_no:te.b().required()}),be=function(e){var t,n,r,i,c,o,s,d=e.title,b=e.ClientId,h=e.onSuccessCallback,O=Object(a.useState)(),m=Object(p.a)(O,2),f=m[0],x=m[1],v=Object(a.useState)(!0),y=Object(p.a)(v,2),g=y[0],_=y[1],k=Object(Q.f)({defaultValues:{name:null===b||void 0===b?void 0:b.name,email:null===b||void 0===b?void 0:b.email,identification_document_no:null===b||void 0===b?void 0:b.identification_document_no,phone_no:null===b||void 0===b?void 0:b.phone_no,country_id:null===b||void 0===b?void 0:b.country_id,remarks:null===b||void 0===b?void 0:b.remarks}},{resolver:Object(ee.a)(je)}),S=k.handleSubmit,w=k.control,C=k.setValue,P=k.formState.errors,E=Object(L.b)(ue),T=Object(V.a)("countries",ce).data,z="Show"===d,M=Object(D.a)(["updateMutation",b],(function(e){return oe(e,b.user.id)}),{onSuccess:function(){G.a.fire("Good job!","You edited  the client!","success"),E.refetchQueries("clients")},onError:function(e){G.a.fire({icon:"error",title:"Oops...",text:"Something goes wrong!"}),x(e.response.data.message)}}),R=function(){var e=Object(I.a)(q.a.mark((function e(t){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Add new client"!==d){e.next=4;break}le(t).then((function(e){E.refetchQueries("clients"),h(),G.a.fire("Good job!","You created  the client!","success"),_(!0)})).catch((function(e){G.a.fire({icon:"error",title:"Oops...",text:"".concat(e.response.data.message)}),x(e.response.data.message)})),e.next=9;break;case 4:if("Edit"!==d){e.next=9;break}return e.next=7,M.mutateAsync(t);case 7:E.refetchQueries("clients"),h();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e;_(!0),(e=b.user.id,Y.a.delete("user-delete/".concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt-token"))}})).then((function(e){E.refetchQueries("clients"),h(),G.a.fire("You deleted  the client!")}))};return"Edit"===d&&Object.keys(b).forEach((function(e){C(e,b[e])})),"Delete"===d?Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{children:Object(j.jsxs)("h3",{children:["Delete ",b.name,"?"]})}),Object(j.jsx)(u.a,{style:{display:"block"},onClick:function(){return B()},type:"primary",htmlType:"submit",children:"Delete"})]}):Object(j.jsxs)(A.a,{onFinish:S(R),children:[Object(j.jsxs)(A.a.Item,{span:6,label:"First and Last name",htmlFor:"name",required:!0,children:[Object(j.jsx)(Q.a,{name:"name",control:w,rules:{required:!0},render:function(e){var t=e.field;return Object(j.jsx)(F.a,Object(l.a)({disabled:z},t))}}),Object(j.jsx)("p",{style:{color:"red"},children:"required"===(null===(t=P.name)||void 0===t?void 0:t.type)&&"This field is required"}),Object(j.jsx)("p",{style:{color:"red"},children:"The name field is required."===f?"The name field is required.":""})]}),Object(j.jsxs)(A.a.Item,{label:"Email",htmlFor:"email",required:!0,children:[Object(j.jsx)(Q.a,{name:"email",control:w,rules:{required:!0},render:function(e){var t=e.field;return Object(j.jsx)(F.a,Object(l.a)({type:"email",disabled:z},t))}}),Object(j.jsx)("p",{style:{color:"red"},children:"The email has already been taken."===f?"The email has already been taken.":""}),Object(j.jsx)("p",{style:{color:"red"},children:"required"===(null===(n=P.email)||void 0===n?void 0:n.type)&&"This field is required"}),Object(j.jsx)("p",{style:{color:"red"},children:null===(r=P.email)||void 0===r?void 0:r.message})]}),Object(j.jsxs)(A.a.Item,{label:"Country",required:!0,children:[Object(j.jsx)(Q.a,{name:"country_id",control:w,rules:{required:!0},render:function(e){var t=e.field;return Object(j.jsx)(N.a,Object(l.a)({disabled:z,defaultValue:"choose country",options:(null===T||void 0===T?void 0:T.data.map((function(e){return{label:e.name,value:e.id}})))||[]},t))}}),Object(j.jsx)("p",{style:{color:"red"},children:"required"===(null===(i=P.country_id)||void 0===i?void 0:i.type)&&"Please select a country"})]}),Object(j.jsxs)(A.a.Item,{label:"ID or Passport",htmlFor:"identification_document_no",required:!0,children:[Object(j.jsx)(Q.a,{name:"identification_document_no",control:w,rules:{required:!0},render:function(e){var t=e.field;return Object(j.jsx)(F.a,Object(l.a)({disabled:z},t))}}),Object(j.jsx)("p",{style:{color:"red"},children:"The identification document no field is required."===f&&"This field is required"}),Object(j.jsx)("p",{style:{color:"red"},children:(null===(c=P.identification_document_no)||void 0===c?void 0:c.message)?"ID or Passport must be a number":""}),Object(j.jsx)("p",{style:{color:"red"},children:"The identification document no has already been taken."===f?"The identification document no has already been taken.":""}),Object(j.jsx)("p",{style:{color:"red"},children:"The identification document no must only contain letters and numbers."===f?"The identification document no must only contain letters and numbers..":""})]}),Object(j.jsxs)(A.a.Item,{label:"Phone",htmlFor:"phone_no",required:!0,children:[Object(j.jsx)(Q.a,{name:"phone_no",control:w,rules:{required:!0},render:function(e){var t=e.field;return Object(j.jsx)(F.a,Object(l.a)({type:"number",disabled:z},t))}}),Object(j.jsx)("p",{style:{color:"red"},children:"required"===(null===(o=P.phone_no)||void 0===o?void 0:o.type)&&"This field is required"}),Object(j.jsx)("p",{style:{color:"red"},children:(null===(s=P.phone_no)||void 0===s?void 0:s.message)?"Phone must be a number":""})]}),Object(j.jsx)("input",{type:"submit",disabled:z}),!1===g?Object(j.jsx)(de.a,{}):""]})},pe=n(210),he=n(595),Oe=n(113),me=n(585),fe=n(580),xe=n(203),ve=n(309),ye=function(e){var t,n=e.data,a=n.name,r=n.type,i=n.label,c=n.required,o=n.icon,s=n.tooltip,d=n.defaultValue,u=n.input_params,b=n.helper_params,p=n.options,h=e.errors,O=e.control,m=e.setValue;return Object(j.jsx)(A.a.Item,{validateStatus:h&&h[a]?"error":"",help:null===(t=h[a])||void 0===t?void 0:t.message,label:i,htmlFor:a,required:c,children:Object(j.jsx)(Q.a,{name:a,control:O,render:function(e){var t=e.field;switch(r){case"text":return Object(j.jsx)(F.a,Object(l.a)(Object(l.a)(Object(l.a)({},t),{},{prefix:o||""},u),{},{id:a,suffix:s?Object(j.jsx)(Oe.a,{title:s||"",children:Object(j.jsx)(xe.a,{style:{color:"rgba(0,0,0,.45)"}})}):""}));case"number":return Object(j.jsx)(me.a,Object(l.a)(Object(l.a)(Object(l.a)({},t),{},{prefix:o||""},u),{},{defaultValue:d,id:a,suffix:s?Object(j.jsx)(Oe.a,{title:s||"",children:Object(j.jsx)(xe.a,{style:{color:"rgba(0,0,0,.45)"}})}):""}));case"select":return Object(j.jsx)(N.a,Object(l.a)(Object(l.a)(Object(l.a)({},t),{},{defaultValue:d},u),{},{id:a,children:p.map((function(e,t){return Object(j.jsx)(N.a.Option,{value:e.value,children:e.label},t)}))}));case"select_async":return Object(j.jsxs)("div",{children:[Object(j.jsx)(ve.a,Object(l.a)({defaultValue:d,additional:{page:1},onChange:function(e){m(a,e.value,{shouldValidate:!0,shouldDirty:!0,shouldTouch:!0})}},b)),Object(j.jsx)("input",Object(l.a)(Object(l.a)({type:"hidden",id:a},t),u))]});case"textarea":return Object(j.jsx)(F.a.TextArea,Object(l.a)(Object(l.a)(Object(l.a)({},t),{},{id:a},u),{},{suffix:s?Object(j.jsx)(Oe.a,{title:s||"",children:Object(j.jsx)(xe.a,{style:{color:"rgba(0,0,0,.45)"}})}):""}));case"date":return Object(j.jsx)(fe.a,Object(l.a)(Object(l.a)({},t),{},{id:a},u));case"password":return Object(j.jsx)(F.a.Password,Object(l.a)(Object(l.a)(Object(l.a)({},t),{},{prefix:o||""},u),{},{id:a,suffix:s?Object(j.jsx)(Oe.a,{title:s||"",children:Object(j.jsx)(xe.a,{style:{color:"rgba(0,0,0,.45)"}})}):""}));default:return Object(j.jsx)(j.Fragment,{})}}})})},ge=te.e().required("required").min(4,"Password is too short - should be 4 chars minimum.").max(12,"Password is too long - should be 12 chars maximum.").matches(/^[a-zA-Z0-9!#%&]*$/g,"Password can only contain Latin letters, numbers and chars(!,#,%,&)"),_e=te.c().shape({old_password:ge,new_password:ge,confirm_password:te.e().oneOf([te.d("new_password"),null],"Passwords must match")}),ke=function(){var e=Object(a.useState)(!1),t=Object(p.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(!1),c=Object(p.a)(i,2),o=c[0],l=c[1],s=Object(Q.f)({mode:"onSubmit",reValidateMode:"onChange",resolver:Object(ee.a)(_e),defaultValues:{email:"",password:"",remember:!1}}),d=s.formState.errors,b=s.handleSubmit,h=s.control,O=s.reset,m=function(){!1===o&&r(!1)};Object(a.useEffect)((function(){n&&O({})}),[n]);var f=[Object(j.jsx)(u.a,{disabled:o,className:"login-form-button",onClick:m,children:"Cancel"},"cancel"),Object(j.jsx)(u.a,{loading:o,type:"primary",form:"change-password-form",icon:Object(j.jsx)(he.a,{}),htmlType:"submit",className:"login-form-button",children:"Edit"},"ok")];return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(u.a,{onClick:function(){return r(!0)},children:"Edit password"}),Object(j.jsx)(y.a,{title:"Change password",visible:n,onCancel:m,footer:f,children:Object(j.jsxs)(A.a,{id:"change-password-form",labelCol:{span:7},wrapperCol:{span:17},layout:"horizontal",onFinish:b((function(e){l(!0),Object(pe.b)(e).then((function(e){l(!1),r(!1)})).catch((function(e){l(!1)}))})),children:[Object(j.jsx)(ye,{data:{type:"password",name:"old_password",label:"Old password",required:!0,input_params:{placeholder:" type old password"}},errors:d,control:h}),Object(j.jsx)(ye,{data:{type:"text",name:"new_password",label:"New password",required:!0,input_params:{type:"password",placeholder:"type new password"}},errors:d,control:h}),Object(j.jsx)(ye,{data:{type:"text",name:"confirm_password",label:"Confirm password",required:!0,input_params:{type:"password",placeholder:"Confirm new password"}},errors:d,control:h})]})})]})},Se=function(){var e=Object(o.f)(),t=Object(a.useState)(!1),n=Object(p.a)(t,2),r=n[0],i=n[1],c=Object(a.useState)(""),l=Object(p.a)(c,2),s=l[0],d=l[1],b=Object(a.useState)(),_=Object(p.a)(b,2),S=_[0],P=_[1],q=function(){i(!0)};Object(a.useEffect)((function(){var e=localStorage.getItem("auth"),t=JSON.parse(e);P(t.name)}),[]);var I=Object(j.jsx)(O.a,{children:"Employee"===Object(ne.a)().role?Object(j.jsxs)("div",{children:[Object(j.jsx)(O.a.Item,{children:Object(j.jsx)(u.a,{style:{border:"none"},onClick:function(){q(),d(Object(j.jsx)(X,{title:"Add new vehicle"}))},children:"add new vehicle"})},k()()),Object(j.jsx)(O.a.Item,{children:Object(j.jsx)(u.a,{style:{border:"none"},onClick:function(){q(),d(Object(j.jsx)(be,{title:"Add new client"}))},children:"add new client"})},k()()),Object(j.jsx)(O.a.Item,{children:Object(j.jsx)(h.b,{to:"/add-reservations",children:"Add new reservetions"})},k()()),Object(j.jsx)(O.a.Item,{children:Object(j.jsx)(u.a,{style:{border:"none"},onClick:function(){localStorage.clear("jwt-token"),e.push("/")},children:"Logout"},k()())},k()()),";"]}):Object(j.jsxs)("div",{children:[Object(j.jsx)(O.a.Item,{children:Object(j.jsx)(ke,{})},k()()),Object(j.jsx)(O.a.Item,{children:Object(j.jsx)(u.a,{style:{border:"none"},onClick:function(){localStorage.clear("jwt-token"),e.push("/")},children:"Logout"},k()())},k()()),";"]})});return Object(j.jsxs)(m.a,{style:{padding:"0"},children:[Object(j.jsxs)(f.a,{span:6,children:[" ",Object(j.jsx)(x.a,{style:{height:"55px",width:"55px"},src:C.a})]}),Object(j.jsx)(f.a,{span:6,children:Object(j.jsxs)(w.a,{style:{color:"white",fontSize:"20px"},children:[S," ",Object(j.jsx)(g.a,{})]})}),Object(j.jsx)(f.a,{span:12,children:Object(j.jsx)(v.a,{align:"end",overlay:I,children:Object(j.jsx)(u.a,{style:{float:"right",margin:"20px 0 0 1px"},children:"Menu"})})}),Object(j.jsx)(y.a,{visible:r,footer:null,onOk:function(){i(!1)},onCancel:function(){i(!1)},children:s})]})},we=n(577),Ce=n(597),Pe=n(598),qe=n(599),Ie=we.a.Sider,Ee=function(){var e=Object(a.useState)(!0),t=Object(p.a)(e,2),n=(t[0],t[1]);return Object(j.jsxs)(Ie,{style:{minHeight:"100vh"},breakpoint:"lg",collapsedWidth:"0",collapsible:!0,onCollapse:function(e){n(e)},children:[Object(j.jsx)("div",{className:"logo"}),Object(j.jsxs)(O.a,{theme:"dark",mode:"inline",children:[Object(j.jsx)(O.a.Item,{icon:Object(j.jsx)(Ce.a,{}),children:Object(j.jsx)(h.b,{to:"/clients",children:"Clients"})},k()()),Object(j.jsx)(O.a.Item,{icon:Object(j.jsx)(Pe.a,{}),children:Object(j.jsx)(h.b,{to:"/vehicles",children:"Vehicles"})},k()()),Object(j.jsx)(O.a.Item,{icon:Object(j.jsx)(qe.a,{}),children:Object(j.jsx)(h.b,{to:"/reservations",children:"Reservations"})},k()())]})]})},Te=we.a.Header,Ae=we.a.Footer,Fe=we.a.Content,Ne=function(e){var t=e.children;return Object(j.jsxs)(we.a,{children:[Object(j.jsx)(Te,{children:Object(j.jsx)(Se,{})}),Object(j.jsxs)(we.a,{children:[Object(j.jsx)(Ee,{}),Object(j.jsx)(Fe,{style:{padding:"40px"},children:t})]}),Object(j.jsx)(Ae,{style:{textAlign:"center"},children:"Amplitudo Academy 2020/2021"})]})},Le=function(e){return e.children},Ve=function(e){var t=e.queryKey,n=e.pageParam,a="reservations?page="+(void 0===n?1:n);return t[1]&&(a+="&search=".concat(t[1])),Y.a.get(a,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt-token"))}})};function De(e){return Ye.apply(this,arguments)}function Ye(){return(Ye=Object(I.a)(q.a.mark((function e(t){var n,a,r,i,c,o;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(null===t||void 0===t?void 0:t.pageParam)||1,c=null===t||void 0===t?void 0:t.queryKey[1],e.next=4,Y.a.get("/reservations",{params:{search:c,page:i},headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt-token"))}});case 4:return o=e.sent,e.abrupt("return",{items:null===o||void 0===o||null===(n=o.data)||void 0===n?void 0:n.data,page:null===o||void 0===o||null===(a=o.data)||void 0===a?void 0:a.current_page,last_page:null===o||void 0===o||null===(r=o.data)||void 0===r?void 0:r.last_page});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ze=n(594),Me=n(592),Re=n(587),Be=n(581),He=n(302),Qe=n(51),Ue=n(300),Ke=function(){var e,t,n,r,i,c,o,l,s,d,b=Object(a.useState)([]),h=Object(p.a)(b,2),O=h[0],m=h[1],f=Object(a.useState)({}),x=Object(p.a)(f,2),v=x[0],g=x[1],_=Object(a.useState)(Qe.b.ALL),k=Object(p.a)(_,2),S=k[0],w=k[1],C=(Object(L.b)(),Object(ze.a)(["reservations",""],De,{getNextPageParam:function(e){var t=e.page;return t<e.last_page&&t+1}})),P=C.data,q=C.isLoading,I=C.fetchNextPage,E=C.hasNextPage,T=C.isFetchingNextPage;Object(Ue.a)((function(){E&&I()}));var A=[Object(j.jsx)(u.a,{className:"login-form-button",onClick:function(){g({})},children:"Cancel"},"close")];return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(Me.b,{style:{marginTop:10,marginLeft:10,display:"flex",justifyContent:"start"},children:Object(j.jsxs)("div",{children:[Object(j.jsx)("span",{children:"Show "}),Object(j.jsxs)(N.a,{defaultValue:Qe.b.ALL,style:{width:150},onChange:function(e){return w(e)},children:[Object(j.jsx)(N.a.Option,{value:Qe.b.ALL,children:"All"}),Object(j.jsx)(N.a.Option,{value:Qe.b.PREVIOUS,children:"Previous"}),Object(j.jsx)(N.a.Option,{value:Qe.b.PRESENT,children:"Present"}),Object(j.jsx)(N.a.Option,{value:Qe.b.FUTURE,children:"Future"})]})]})}),Object(j.jsx)("div",{style:{display:"flex",justifyContent:"center",flexWrap:"wrap",margin:10},children:Object(j.jsx)(Re.a,{loading:q,avatar:!0,active:!0,children:P&&(null===(e=Object(ne.c)(P))||void 0===e?void 0:e.length)>0&&Object(ne.c)(P).map((function(e,t){var n,a,r;return(Object(ne.f)(null===e||void 0===e?void 0:e.from_date,null===e||void 0===e?void 0:e.to_date,Date.now())===S||S===Qe.b.ALL)&&Object(j.jsxs)(Be.a,{loading:q,hoverable:!0,title:null===e||void 0===e||null===(n=e.vehicle)||void 0===n?void 0:n.plate_no,style:{width:"33%"},onClick:function(){!function(e){g(e),m(null===e||void 0===e?void 0:e.equipment)}(e)},children:[Object(j.jsxs)("p",{children:["From ",null===e||void 0===e?void 0:e.from_date," / ",null===e||void 0===e||null===(a=e.rent_location)||void 0===a?void 0:a.name]}),Object(j.jsxs)("p",{children:["To ",null===e||void 0===e?void 0:e.to_date," / ",null===e||void 0===e||null===(r=e.return_location)||void 0===r?void 0:r.name]})]},t)}))})}),T&&Object(j.jsx)(He.a,{tip:"Loading..."}),Object(j.jsx)(y.a,{title:"Info",visible:null===v||void 0===v?void 0:v.id,onCancel:function(){return g({})},footer:A,children:Object(j.jsxs)("div",{style:{textAlign:"center",backgroundColor:"skyblue"},children:[Object(j.jsx)("h3",{children:"Reservation:"}),Object(j.jsxs)("p",{children:["From :",null===v||void 0===v?void 0:v.from_date]}),Object(j.jsxs)("p",{children:["To:",null===v||void 0===v?void 0:v.to_date]}),Object(j.jsxs)("p",{children:["Rent location:",null===v||void 0===v||null===(t=v.rent_location)||void 0===t?void 0:t.name]}),Object(j.jsxs)("p",{children:["Return location:",null===v||void 0===v||null===(n=v.return_location)||void 0===n?void 0:n.name]}),Object(j.jsxs)("h4",{children:["Total price:",null===v||void 0===v?void 0:v.total_price]}),Object(j.jsx)("h3",{children:"Client"}),Object(j.jsxs)("p",{children:["Frist & Last name: ",null===v||void 0===v||null===(r=v.client)||void 0===r?void 0:r.name]}),Object(j.jsx)("h3",{children:"Vehicle:"}),Object(j.jsxs)("p",{children:["Plates number:",null===v||void 0===v||null===(i=v.vehicle)||void 0===i?void 0:i.plate_no]}),Object(j.jsxs)("p",{children:["Production year:",null===v||void 0===v||null===(c=v.vehicle)||void 0===c?void 0:c.production_year]}),Object(j.jsxs)("p",{children:["Vehicle type:",null===v||void 0===v||null===(o=v.vehicle)||void 0===o||null===(l=o.car_type)||void 0===l?void 0:l.name]}),Object(j.jsxs)("p",{children:["Number of seats:",null===v||void 0===v||null===(s=v.vehicle)||void 0===s?void 0:s.no_of_seats]}),Object(j.jsxs)("p",{children:["Price/Day :",null===v||void 0===v||null===(d=v.vehicle)||void 0===d?void 0:d.price_per_day,"\u20ac"]}),Object(j.jsx)("h3",{children:"Equipment"}),O.map((function(e){return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("p",{children:[e.name," - ",e.max_quantity]})})}))]})})]})},Je=we.a.Content,Ge=we.a.Header,We=function(e){e.children;return Object(j.jsx)("div",{children:Object(j.jsxs)(we.a,{children:[Object(j.jsx)(Ge,{children:Object(j.jsx)(Se,{})}),Object(j.jsx)(Je,{style:{minHeight:"100vh"},children:Object(j.jsx)(Ke,{})})]})})},Ze=["component","isPrivate","path"],$e=function(e){var t,n,a=e.component,r=e.isPrivate,i=e.path,c=Object(s.a)(e,Ze),d=r?"Employee"===(null===(t=Object(ne.a)())||void 0===t?void 0:t.role)?Ne:We:Le;return"/"===i&&(a="Employee"===(null===(n=Object(ne.a)())||void 0===n?void 0:n.role)?Ne:Ke),Object(j.jsx)(o.a,Object(l.a)(Object(l.a)({},c),{},{component:function(){return r?localStorage.getItem("jwt-token")?Object(j.jsx)(d,{children:Object(j.jsx)(a,Object(l.a)({},c))}):Object(j.jsx)(b,{}):Object(j.jsx)(d,{children:Object(j.jsx)(a,Object(l.a)({},c))})}}))},Xe=n(37),et=n(579),tt=function(){var e=Object(a.useState)(!1),t=Object(p.a)(e,2),n=t[0],r=t[1],i=Object(Q.f)().reset,c=Object(a.useState)(""),o=Object(p.a)(c,2),l=o[0],s=o[1],d=Object(a.useState)(),b=Object(p.a)(d,2),h=b[0],O=b[1],m=Object(ze.a)(["clients",h],ae,{getNextPageParam:function(e){var t=e.data.current_page;return t===e.data.last_page?void 0:t+1}}),f=m.data,x=m.fetchNextPage,v=m.isFetchingNextPage,g=[];null===f||void 0===f||f.pages.forEach((function(e){g.push.apply(g,Object(Xe.a)(e.data.data))}));var _=function(){r(!0)},k=function(){i(),r(!1)};Object(a.useEffect)((function(e){document.querySelector(".ant-table-body").addEventListener("scroll",(function(e){var t=e.target.scrollHeight-e.target.clientHeight;e.target.scrollTop===t&&x()}))}),[x]);var S=[{title:"Name",dataIndex:"name",key:"name"},{title:"ID & Passport",dataIndex:"identification_document_no",key:"identification_document_no"},{title:"Phone number",dataIndex:"phone_no",key:"phone_no"},{title:"Date of first reservation",key:"date_of_first_reservation",dataIndex:"date_of_first_reservation"},{title:"Date of last reservation",key:"date_of_last_reservation",dataIndex:"date_of_last_reservation"},{title:"Action",key:"action",render:function(e){return Object(j.jsxs)(Me.b,{size:"middle",children:[Object(j.jsx)("button",{onClick:function(t){t.stopPropagation(),_(),s(Object(j.jsx)(be,{title:"Delete",ClientId:e,onSuccessCallback:k}))},children:"Delete"}),Object(j.jsx)("button",{onClick:function(t){t.stopPropagation(),_(),s(Object(j.jsx)(be,{title:"Edit",ClientId:e,onSuccessCallback:k}))},children:"Edit"})]})}}];return Object(j.jsxs)("div",{children:[Object(j.jsx)(u.a,{style:{border:"none"},onClick:function(){_(),s(Object(j.jsx)(be,{title:"Add new client",onSuccessCallback:k}))},children:"add new client"}),Object(j.jsx)(y.a,{destroyOnClose:!0,footer:null,title:"Clients",onCancel:function(){r(!1)},visible:n,children:l}),Object(j.jsx)(F.a.Search,{placeholder:"Search client",allowClear:!0,onSearch:function(e){O(e)},style:{width:200}}),Object(j.jsx)(et.a,{onRow:function(e,t){return{onClick:function(t){_(),s(Object(j.jsx)(be,{title:"Show",ClientId:e,onSuccessCallback:k}))}}},columns:S,rowKey:function(e){return"client-".concat(e.id)},scroll:{y:400,x:1e3},dataSource:g,pagination:!1,loading:v})]})},nt=n(591),at=n(305),rt=n(583),it=function(e){var t=e.photos,n=e.plates,a=e.prodYear,r=e.seats,i=e.carType,c=e.pricePerDay,o=e.remarks;return console.log("vehicle photos",t),Object(j.jsxs)("div",{style:{textAlign:"center",backgroundColor:"skyblue"},children:[Object(j.jsx)("h3",{children:"Car Info"}),Object(j.jsxs)("p",{children:["Plates -",n]},k()()),Object(j.jsxs)("p",{children:["Production Year - ",a]},k()()),Object(j.jsxs)("p",{children:["Seats - ",r]},k()()),Object(j.jsxs)("p",{children:["Car Type - ",i]},k()()),Object(j.jsxs)("p",{children:["Price/Day - ",c]},k()()),Object(j.jsxs)("p",{children:["Additional Remarks - ",o]},k()()),t.map((function(e){return Object(j.jsx)(rt.a,{width:200,height:200,src:"http://akademija-api.proserver.me/".concat(e.photo)})}))]})},ct=function(e){e.onSubmit;var t=Object(a.useState)(""),n=Object(p.a)(t,2),r=n[0],i=n[1],c=Object(a.useState)(!1),o=Object(p.a)(c,2),l=o[0],s=o[1],d=Object(a.useState)(),b=Object(p.a)(d,2),h=b[0],O=b[1],m=Object(ze.a)(["vehicles",h],z,{getNextPageParam:function(e){var t=e.data.current_page;return t===e.data.last_page?void 0:t+1}}),f=m.data,x=m.fetchNextPage,v=m.isFetchingNextPage,g=function(){s(!0)},_=[];null===f||void 0===f||f.pages.forEach((function(e){_.push.apply(_,Object(Xe.a)(e.data.data))})),Object(a.useEffect)((function(e){document.querySelector(".ant-table-body").addEventListener("scroll",(function(e){var t=e.target.scrollHeight-e.target.clientHeight;e.target.scrollTop===t&&x()}))}));var k=[{title:"Plates",dataIndex:"plate_no",key:"plate_no"},{title:"Production Year",dataIndex:"production_year",key:"production_year"},{title:"Vehicle Type",dataIndex:["car_type","name"],key:"type"},{title:"Seats",key:"no_of_seats",dataIndex:"no_of_seats"},{title:"Price/Day",key:"price_per_day",dataIndex:"price_per_day"},{title:"Additional Remarks",key:"remarks",dataIndex:"remarks"},{title:"Action",key:"action",render:function(e){return Object(j.jsxs)(Me.b,{size:"middle",children:[Object(j.jsx)("button",{onClick:function(t){t.stopPropagation(),g(),i(Object(j.jsx)(X,{title:"Delete",vehicleId:e.id}))},children:"Delete"}),Object(j.jsx)("button",{onClick:function(t){t.stopPropagation(),g(),i(Object(j.jsx)(X,{title:"Edit",vehicleId:e}))},children:"Edit"})]})}}];return Object(j.jsxs)("div",{children:[Object(j.jsx)(u.a,{style:{border:"none"},onClick:function(e){e.stopPropagation(),g(),i(Object(j.jsx)(X,{title:"Add new vehicle"}))},children:"add new vehicle"}),Object(j.jsx)(F.a.Search,{placeholder:"Search vehicle",allowClear:!0,onSearch:function(e){O(e)},style:{width:200}}),Object(j.jsx)(y.a,{footer:null,onCancel:function(){s(!1)},visible:l,destroyOnClose:!0,children:r}),Object(j.jsx)(et.a,{onRow:function(e,t){return{onClick:function(t){i(Object(j.jsx)(it,{photos:e.photos,plates:e.plate_no,prodYear:e.production_year,seats:e.no_of_seats,carType:e.car_type.name,pricePerDay:e.price_per_day,remarks:e.remarks})),s(!0)}}},columns:k,rowKey:function(e){return"vehicle-".concat(e.id)},scroll:{y:400,x:1e3},dataSource:_,pagination:!1,loading:v})]})},ot=function(e){e.reservationId;var t=e.from_date,n=e.to_date,a=e.rentLocation,r=e.returnLocation,i=e.totalPrice,c=e.plateNo,o=e.prodYear,l=e.carType,s=e.noSeats,d=e.pd,u=e.equip;return Object(j.jsxs)("div",{style:{textAlign:"center",backgroundColor:"skyblue"},children:[Object(j.jsx)("h2",{children:"Reservation"}),Object(j.jsxs)("p",{children:["From date: ",t," "]},k()()),Object(j.jsxs)("p",{children:["To date: ",n," "]},k()()),Object(j.jsxs)("p",{children:["Rent location: ",a," "]},k()()),Object(j.jsxs)("p",{children:["Return location: ",r," "]},k()()),Object(j.jsxs)("p",{children:["Total price: ",i," \u20ac"]},k()()),Object(j.jsx)("h2",{children:"Vehicle"},k()()),Object(j.jsxs)("p",{children:["Plate number: ",c]},k()()),Object(j.jsxs)("p",{children:["Production Year: ",o]},k()()),Object(j.jsxs)("p",{children:["Car Type: ",l]},k()()),Object(j.jsxs)("p",{children:["Number of seats ",s]},k()()),Object(j.jsxs)("p",{children:["Price/Day ",d]},k()()),Object(j.jsx)("h3",{children:"Equipment"},k()()),u.map((function(e){return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("p",{children:[e.name," - ",e.max_quantity]},k()())})}))]})},lt=function(){var e=Object(a.useState)(!1),t=Object(p.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(""),c=Object(p.a)(i,2),l=c[0],s=c[1],d=Object(o.f)(),b=Object(a.useState)(""),h=Object(p.a)(b,1)[0],O=Object(ze.a)(["reservations",h],Ve,{getNextPageParam:function(e){var t=e.data.current_page;return t===e.data.last_page?void 0:t+1}}),m=O.data,f=O.fetchNextPage,x=O.isFetchingNextPage,v=Object(L.b)(),g=[];null===m||void 0===m||m.pages.forEach((function(e){g.push.apply(g,Object(Xe.a)(e.data.data))}));var _=function(e){!function(e){Y.a.delete("reservation-delete/".concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt-token"))}})}(e)};Object(a.useEffect)((function(e){document.querySelector(".ant-table-body").addEventListener("scroll",(function(e){var t=e.target.scrollHeight-e.target.clientHeight;e.target.scrollTop===t&&f()}))}));var k=[{title:"Client",dataIndex:["client","name"],key:"name"},{title:"Vehicle",dataIndex:["vehicle","plate_no"],key:"country"},{title:"From",dataIndex:"from_date",key:"from_date"},{title:"To",key:"to_date",dataIndex:"to_date"},{title:"Location",key:"rent_location",dataIndex:["rent_location","name"]},{title:"Return location",key:"return_location",dataIndex:["return_location","name"]},{title:"Total Price",key:"total_price",dataIndex:"total_price"},{title:"Action",key:"action",render:function(e){return Object(j.jsx)(Me.b,{size:"middle",children:Object(j.jsx)("button",{onClick:function(t){t.stopPropagation(),r(!0),s(Object(j.jsxs)("div",{children:[Object(j.jsxs)("h3",{children:["Delete reservation for ",e.client.name]}),Object(j.jsx)("button",{style:{color:"red"},onClick:function(){_(e.id),G.a.fire("You deleted  the client!"),v.refetchQueries("reservations"),d.push("reservations")},children:"Delete"})]}))},children:"delete"})})}}];return Object(j.jsxs)("div",{children:[Object(j.jsx)(u.a,{className:"dashed",onClick:function(){d.push("/add-reservations")},children:"add reservations"}),Object(j.jsx)(y.a,{onCancel:function(){r(!1)},footer:null,visible:n,children:l}),Object(j.jsx)(et.a,{onRow:function(e){return{onClick:function(){s(Object(j.jsx)(ot,{reservationId:e.id,from_date:e.from_date,to_date:e.to_date,rentLocation:e.rent_location.name,returnLocation:e.return_location.name,totalPrice:e.total_price,plateNo:e.vehicle.plate_no,prodYear:e.vehicle.production_year,carType:e.vehicle.car_type.name,noSeats:e.vehicle.no_of_seats,pd:e.price_per_day,equip:e.equipment})),r(!0)}}},columns:k,scroll:{y:400,x:1e3},dataSource:g,pagination:!1,loading:x})]})},st=n(314),dt=n(600),ut=function(e){var t=e.onFinish,n=e.handleSubmit,r=e.errors,i=e.control,c=e.setValue,o=e.getValues,l=e.price_per_day,s=Object(a.useState)([]),d=Object(p.a)(s,2),u=d[0],b=d[1],h=Object(a.useState)([]),O=Object(p.a)(h,2),x=O[0],v=O[1];return Object(a.useEffect)((function(){Y.a.get("/locations",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt-token"))}}).then((function(e){var t=null===e||void 0===e?void 0:e.data;b(t.map((function(e){return Object({value:e.id,label:e.name})})))})),Y.a.get("/equipment",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt-token"))}}).then((function(e){var t,n=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data;v(n.map((function(e){return Object({id:e.id,name:e.name,max_quantity:e.max_quantity})})))}))}),[]),Object(j.jsxs)(A.a,{id:"create-reservation-form",labelCol:{span:12},wrapperCol:{span:17},layout:"horizontal",onFinish:n(t),onValuesChange:function(){},size:"default",children:[Object(j.jsx)(ye,{data:{type:"text",name:"vehicle",label:"Vehicle",required:!1,input_params:{disabled:!0,style:{width:"100%",color:"black"}}},errors:r,control:i}),Object(j.jsx)(ye,{data:{type:"select_async",name:"client_id",label:"Client",required:!0,helper_params:{placeholder:"Choose client",loadOptions:re,defaultValue:""}},errors:r,control:i,setValue:c}),Object(j.jsx)(ye,{data:{type:"date",name:"from_date",label:"Datum od",required:!0,input_params:{style:{width:"100%"},placeholder:"From date",allowClear:!0,onChange:function(e){var t=o("to_date"),n=e;if(n&&t){var a=t.diff(n,"days");c("total_price",a>0?a*l:0)}else c("total_price",0);c("from_date",e,{shouldValidate:!0,shouldDirty:!0,shouldTouch:!0})}}},errors:r,control:i}),Object(j.jsx)(ye,{data:{type:"date",name:"to_date",label:"To date",required:!0,input_params:{style:{width:"100%"},placeholder:"to date",allowClear:!0,onChange:function(e){var t=o("from_date");if(t&&e){var n=e.diff(t,"days");c("total_price",n>0?n*l:0)}else c("total_price",0);c("to_date",e,{shouldValidate:!0,shouldDirty:!0,shouldTouch:!0})}}},errors:r,control:i}),Object(j.jsx)(ye,{data:{type:"select",name:"rent_location_id",label:"Rent location",required:!0,input_params:{placeholder:"Choose rent location"},options:u},errors:r,control:i}),Object(j.jsx)(ye,{data:{type:"select",name:"return_location_id",label:"Return location",required:!0,input_params:{placeholder:"Choose return location"},options:u},errors:r,control:i}),Object(j.jsx)("p",{children:"Equipment:"}),Object(j.jsx)(F.a.Group,{children:Object(j.jsx)(m.a,{gutter:12,children:x.map((function(e,t){return Object(j.jsx)(f.a,{span:11,children:Object(j.jsx)(ye,{data:{type:"number",name:"_"+e.id,label:e.name,input_params:{max:e.max_quantity,step:1,min:0,placeholder:"0"}},errors:r,control:i},t)})}))})}),Object(j.jsx)("p",{children:"Total price"}),Object(j.jsx)(ye,{data:{type:"number",name:"total_price",label:"Total price",input_params:{readOnly:!0,min:0,formatter:function(e){return"".concat(e,"\u20ac")},parser:function(e){return e.replace("\u20ac","")},style:{width:"100%",color:"black"}}},errors:r,control:i})]})},jt=n(63),bt=n.n(jt),pt=function(e){var t,n=e.openModal,r=e.setOpenModal,i=e.title,c=e.form,o=c.control,s=c.errors,d=c.handleSubmit,b=c.reset,h=c.setValue,O=c.getValues,m=e.queryClient,f=e.params,x=Object(a.useState)(!1),v=Object(p.a)(x,2),g=v[0],_=v[1],k=function(){!1===g&&r(Object(l.a)(Object(l.a)({},n),{},{open:!1}))};Object(a.useEffect)((function(){var e,t;n.open&&n.id&&b({total_price:Object(ne.b)(bt()(f.start_date),bt()(f.end_date),null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.price_per_day),vehicle_id:n.id,vehicle:null===(t=n.data)||void 0===t?void 0:t.plate_no,from_date:bt()(f.start_date),to_date:bt()(f.end_date)})}),[n]);var S=[Object(j.jsx)(u.a,{disabled:g,className:"login-form-button",onClick:k,children:"Cancel"},"cancel"),Object(j.jsx)(u.a,{loading:g,type:"primary",form:"create-reservation-form",htmlType:"submit",className:"login-form-button",children:"Submit"},"ok")];return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(y.a,{title:i,visible:n.open,onCancel:k,footer:S,children:Object(j.jsx)(ut,{control:o,errors:s,setValue:h,getValues:O,handleSubmit:d,onFinish:function(e){var t=Object(ne.e)(e);delete t.vehicle,delete t.total_price,t.to_date=bt()(t.to_date).format("YYYY-MM-DD"),t.from_date=bt()(t.from_date).format("YYYY-MM-DD"),_(!0),function(e){return Y.a.post("/reservation-store",e,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt-token"))}})}(t).then((function(e){m.invalidateQueries("cars-available"),T.b.success("This is a success message"),_(!1),r({})})).catch((function(e){var t,n;Object(T.b)(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message,2),_(!1)}))},price_per_day:null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.price_per_day})})})},ht=te.c().shape({to_date:te.a().required(),from_date:te.a().required(),rent_location_id:te.b().integer().required(),return_location_id:te.b().integer().required(),total_price:te.b().required(),vehicle_id:te.b().integer().required(),client_id:te.b().integer().required()}),Ot=function(){var e=Object(Q.f)({mode:"onSubmit",reValidateMode:"onChange",resolver:Object(ee.a)(ht),defaultValues:{date_from:"",date_to:"",total_price:0}}),t=e.formState.errors,n=e.handleSubmit,r=e.control,i=e.reset,c=e.setValue,o=e.getValues,s=Object(a.useState)({}),d=Object(p.a)(s,2),b=d[0],h=d[1],O=Object(a.useState)({start_date:"",end_date:"",car_type:0}),m=Object(p.a)(O,2),f=m[0],x=m[1],v=Object(a.useState)({}),y=Object(p.a)(v,2),g=y[0],_=y[1],k=Object(L.b)(),S=Object(ze.a)(["cars-available",g],B,{getNextPageParam:function(e){var t=e.page;return t<e.last_page&&t+1},enabled:Boolean(g.car_type)}),w=S.data,C=S.isError,P=S.fetchNextPage,q=S.hasNextPage,I=S.isFetching,E=S.isFetchingNextPage;C&&T.b.error();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(Me.b,{style:{marginTop:10,display:"flex",justifyContent:"start"},children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("span",{children:"Vehicle Type "}),Object(j.jsx)(N.a,{placeholder:" Choose vehicle type",style:{width:150},onChange:function(e){return x(Object(l.a)(Object(l.a)({},f),{},{car_type:e}))},children:Qe.a.map((function(e,t){return Object(j.jsx)(N.a.Option,{value:e.value,children:e.label},t)}))})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("span",{children:"Period of time"}),Object(j.jsx)(fe.a.RangePicker,{onChange:function(e){if(e){var t=bt()(e[0]._d).format("YYYY-MM-DD"),n=bt()(e[1]._d).format("YYYY-MM-DD");x(Object(l.a)(Object(l.a)({},f),{},{start_date:t,end_date:n}))}else x(Object(l.a)(Object(l.a)({},f),{},{start_date:"",end_date:""}))}}),Object(j.jsx)(u.a,{type:JSON.stringify(f)===JSON.stringify(g)?"":"primary",onClick:function(){return _(Object(l.a)({},f))},style:{marginLeft:10},icon:Object(j.jsx)(dt.a,{}),children:"Search"})]}),Object(j.jsx)(pt,{openModal:b,setOpenModal:h,title:b.title,form:{errors:t,handleSubmit:n,control:r,reset:i,setValue:c,getValues:o},queryClient:k,params:g})]}),Object(j.jsx)(st.a,{rowKey:"id",loading:E,columns:[{title:"Plates number",dataIndex:"plate_no"},{title:"Production Year",dataIndex:"production_year"},{title:"Number of seats",dataIndex:"no_of_seats"},{title:"Price/Day",dataIndex:"price_per_day"}],dataSource:Object(ne.c)(w),onFetch:function(){q&&P()},onRow:function(e){return{onClick:function(){h({open:!0,title:"Create reservation",id:e.id,data:e})}}},className:"hover-row",bordered:!0,pagination:!1,scroll:{y:window.innerHeight-250}}),I&&!E&&Object(j.jsx)(He.a,{tip:"Loading..."})]})},mt=(n(571),r.a.lazy((function(){return n.e(4).then(n.bind(null,605))}))),ft=r.a.lazy((function(){return n.e(3).then(n.bind(null,603))})),xt=new nt.a;var vt=function(){return Object(j.jsxs)(L.a,{client:xt,children:[Object(j.jsxs)(o.c,{children:[Object(j.jsx)($e,{path:"/home",exact:!0,component:function(){return Object(j.jsx)(a.Suspense,{fallback:Object(j.jsx)(He.a,{size:"large"}),children:Object(j.jsx)(ft,{})})},isPrivate:!0,role:Qe.c.EMPLOYEE}),Object(j.jsx)($e,{path:"/home",exact:!0,component:Ke,isPrivate:!0,role:Qe.c.CLIENT}),Object(j.jsx)($e,{path:"/clients",exact:!0,component:tt,isPrivate:!0,role:Qe.c.EMPLOYEE}),Object(j.jsx)($e,{path:"/vehicles",exact:!0,component:ct,isPrivate:!0,role:Qe.c.EMPLOYEE}),Object(j.jsx)($e,{path:"/reservations",exact:!0,component:lt,isPrivate:!0,role:Qe.c.EMPLOYEE}),Object(j.jsx)($e,{path:"/add-reservations",exact:!0,component:Ot,isPrivate:!0,role:Qe.c.EMPLOYEE}),Object(j.jsx)(o.a,{path:"/",component:function(){return Object(j.jsx)(a.Suspense,{fallback:Object(j.jsx)(He.a,{size:"large"}),children:Object(j.jsx)(mt,{})})}})]}),Object(j.jsx)(at.ReactQueryDevtools,{initialIsOpen:!1})]})},yt=function(e){e&&e instanceof Function&&n.e(5).then(n.bind(null,604)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))},gt=n(234),_t=n(578),kt=n(316);gt.a.use(kt.a).use(_t.a).init({fallbackLng:"en",debug:!0,whitelist:["en","me"],interpolation:{escapeValue:!1}});gt.a;c.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(h.a,{children:Object(j.jsx)(a.Suspense,{fallback:Object(j.jsx)("div",{children:"Loading"}),children:Object(j.jsx)(vt,{})})})}),document.getElementById("root")),yt()},69:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"f",(function(){return o})),n.d(t,"g",(function(){return l})),n.d(t,"c",(function(){return s})),n.d(t,"e",(function(){return d})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return j}));var a=n(19),r=n(51),i=function(){return JSON.parse(localStorage.getItem("auth"))},c=function(e){return new Date(e)},o=function(e,t,n){return function(e,t,n){return c(n)<=c(t)&&c(n)>=c(e)}(e,t,n)?r.b.PRESENT:c(n)>c(t)?r.b.PREVIOUS:r.b.FUTURE},l=function(e){localStorage.setItem("auth",JSON.stringify({name:e.name,token:e.token,role:e.role}))},s=function(e){var t=[],n=null===e||void 0===e?void 0:e.pages;return n&&n.forEach((function(e){e.items&&(t[(null===e||void 0===e?void 0:e.page)-1]=e.items)})),[].concat.apply([],t)},d=function(e){var t=Object(a.a)({},e);for(var n in t.equipment=[],e)(null===n||void 0===n?void 0:n.startsWith("_"))&&(t.equipment.push({equipment_id:n.substring(1),quantity:e[n]||0}),delete t[n]);return t},u=function(e,t,n){if(e&&t){var a=t.diff(e,"days");return a>0?a*n:0}return 0},j=function(e){return e.map((function(e){return Object({value:e.id,label:e.name})}))}}},[[572,1,2]]]);
//# sourceMappingURL=main.87363b5c.chunk.js.map