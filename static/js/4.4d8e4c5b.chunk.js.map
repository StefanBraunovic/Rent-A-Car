{"version":3,"sources":["pages/login/Login.module.css","images/car-animation/car.png","images/car-animation/wheel.png","pages/login/Login.jsx"],"names":["module","exports","schema","yup","shape","email","required","password","min","max","matches","LoginPage","history","useHistory","useState","errorMessage","useForm","resolver","yupResolver","register","handleSubmit","errors","formState","isLoading","setLoading","onSubmit","data","Login","then","response","localStorage","setItem","token","access_token","me","res","saveAuth","name","role","role_id","ROLES","EMPLOYEE","CLIENT","push","catch","error","Swal","fire","icon","title","text","className","style","hero","loginBody","login","logo","src","alt","subtitle","fields","viewBox","d","type","placeholder","textAlign","color","message","loading","signinBtn","htmlType","highway","city","car","Car","wheel","backWheel","frontWheel"],"mappings":"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","file":"static/js/4.4d8e4c5b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"hero\":\"Login_hero__1zgvR\",\"loginBody\":\"Login_loginBody__19We-\",\"login\":\"Login_login__1oSzt\",\"logo\":\"Login_logo__3Asr1\",\"title\":\"Login_title__2qE1S\",\"subtitle\":\"Login_subtitle__1ohNf\",\"fields\":\"Login_fields__NSyzh\",\"email\":\"Login_email__11QqF\",\"password\":\"Login_password__1Us_c\",\"signinBtn\":\"Login_signinBtn__1UstU\",\"highway\":\"Login_highway__3yQRF\",\"city\":\"Login_city__1e-Uc\",\"car\":\"Login_car__1uDDi\",\"wheel\":\"Login_wheel__3NGj4\",\"backWheel\":\"Login_backWheel__Ik02Z\",\"frontWheel\":\"Login_frontWheel__18PB5\"};","export default __webpack_public_path__ + \"static/media/car.de1b7a9b.png\";","export default __webpack_public_path__ + \"static/media/wheel.c79d2fd7.png\";","import React, {useState} from 'react';\r\nimport {useForm} from 'react-hook-form';\r\nimport {yupResolver} from '@hookform/resolvers/yup';\r\nimport * as yup from 'yup';\r\nimport style from '../login/Login.module.css';\r\nimport Car from '../../images/car-animation/car.png';\r\nimport wheel from '../../images/car-animation/wheel.png';\r\nimport logo from '../../images/logo.png';\r\nimport {useHistory} from 'react-router-dom';\r\nimport {Login, me} from '../../services/account';\r\nimport {saveAuth} from '../../functions/helper';\r\nimport {ROLES} from '../../constants/constants';\r\nimport {Button} from 'antd';\r\nimport Swal from 'sweetalert2';\r\n\r\nconst schema = yup.object().shape({\r\n  email: yup.string().email().required(),\r\n  password: yup\r\n    .string()\r\n    .required('required')\r\n    .min(4, 'Password is too short - should be 4 chars minimum.')\r\n    .max(12, 'Password is too long - should be 12 chars maximum.')\r\n    .matches(\r\n      /^[a-zA-Z0-9!#%&]*$/g,\r\n      'Password can only contain Latin letters, numbers and chars(!,#,%,&)',\r\n    ),\r\n});\r\n\r\nconst LoginPage = () => {\r\n  const history = useHistory();\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: {errors},\r\n  } = useForm({resolver: yupResolver(schema)});\r\n\r\n  const [isLoading, setLoading] = useState(false);\r\n\r\n  const onSubmit = data => {\r\n    Login(data)\r\n      .then(function (response) {\r\n        localStorage.setItem('jwt-token', response?.data['access_token']);\r\n        let token = response?.data?.access_token;\r\n        setLoading(true);\r\n\r\n        me(token).then(res => {\r\n          saveAuth({\r\n            name: res?.data?.name,\r\n            role: res?.data?.role_id === 1 ? ROLES.EMPLOYEE : ROLES.CLIENT,\r\n            token: token,\r\n          });\r\n          localStorage.setItem('role_id', res?.data.role_id);\r\n          history.push('/home');\r\n          setLoading(false);\r\n        });\r\n      })\r\n      .catch(function (error) {\r\n        if (error?.response?.data?.error === 'Unauthorized') {\r\n          Swal.fire({\r\n            icon: 'error',\r\n            title: 'Oops...',\r\n            text: 'Wrong credentials!',\r\n          });\r\n        }\r\n      });\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit(onSubmit)}>\r\n      <div className={style.hero}>\r\n        <div className={style.loginBody}>\r\n          <div className={style.login}>\r\n            <div className={style.logo}>\r\n              <img src={logo} alt=\"car\" />\r\n            </div>\r\n            <div className={style.title}>Sign In to Rent Smart</div>\r\n            <div className={style.subtitle}>Made easy!</div>\r\n            <div className={style.fields}>\r\n              <div className={style.email}>\r\n                <svg className=\"svg-icon\" viewBox=\"0 0 20 20\">\r\n                  <path d=\"M12.075,10.812c1.358-0.853,2.242-2.507,2.242-4.037c0-2.181-1.795-4.618-4.198-4.618S5.921,4.594,5.921,6.775c0,1.53,0.884,3.185,2.242,4.037c-3.222,0.865-5.6,3.807-5.6,7.298c0,0.23,0.189,0.42,0.42,0.42h14.273c0.23,0,0.42-0.189,0.42-0.42C17.676,14.619,15.297,11.677,12.075,10.812 M6.761,6.775c0-2.162,1.773-3.778,3.358-3.778s3.359,1.616,3.359,3.778c0,2.162-1.774,3.778-3.359,3.778S6.761,8.937,6.761,6.775 M3.415,17.69c0.218-3.51,3.142-6.297,6.704-6.297c3.562,0,6.486,2.787,6.705,6.297H3.415z\"></path>\r\n                </svg>\r\n                <input\r\n                  type=\"email\"\r\n                  placeholder=\"email\"\r\n                  {...register('email')}\r\n                />\r\n              </div>\r\n              <p style={{textAlign: 'center', color: 'red'}}>\r\n                {errors.email?.message}\r\n              </p>\r\n              <div className={style.password}>\r\n                <svg className=\"svg-icon\" viewBox=\"0 0 20 20\">\r\n                  <path d=\"M17.308,7.564h-1.993c0-2.929-2.385-5.314-5.314-5.314S4.686,4.635,4.686,7.564H2.693c-0.244,0-0.443,0.2-0.443,0.443v9.3c0,0.243,0.199,0.442,0.443,0.442h14.615c0.243,0,0.442-0.199,0.442-0.442v-9.3C17.75,7.764,17.551,7.564,17.308,7.564 M10,3.136c2.442,0,4.43,1.986,4.43,4.428H5.571C5.571,5.122,7.558,3.136,10,3.136 M16.865,16.864H3.136V8.45h13.729V16.864z M10,10.664c-0.854,0-1.55,0.696-1.55,1.551c0,0.699,0.467,1.292,1.107,1.485v0.95c0,0.243,0.2,0.442,0.443,0.442s0.443-0.199,0.443-0.442V13.7c0.64-0.193,1.106-0.786,1.106-1.485C11.55,11.36,10.854,10.664,10,10.664 M10,12.878c-0.366,0-0.664-0.298-0.664-0.663c0-0.366,0.298-0.665,0.664-0.665c0.365,0,0.664,0.299,0.664,0.665C10.664,12.58,10.365,12.878,10,12.878\"></path>\r\n                </svg>\r\n                <input\r\n                  type=\"password\"\r\n                  name=\"password\"\r\n                  placeholder=\"password\"\r\n                  {...register('password')}\r\n                />\r\n              </div>\r\n              <div>\r\n                <p style={{textAlign: 'center', color: 'red'}}>\r\n                  {errors.password?.message}\r\n                </p>\r\n              </div>\r\n            </div>\r\n            <Button\r\n              type=\"submit\"\r\n              loading={isLoading}\r\n              className={style.signinBtn}\r\n              htmlType=\"submit\">\r\n              Submit\r\n            </Button>\r\n            <span style={{color: 'red'}}>{errorMessage}</span>\r\n          </div>\r\n        </div>\r\n\r\n        <div className={style.highway}></div>\r\n        <div className={style.city}></div>\r\n        <div className={style.car}>\r\n          <img src={Car} alt=\"car\" />\r\n        </div>\r\n        <div className={style.wheel}>\r\n          <img src={wheel} alt=\"\" className={style.backWheel} />\r\n          <img src={wheel} alt=\"\" className={style.frontWheel} />\r\n        </div>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default LoginPage;\r\n"],"sourceRoot":""}